dockserv_uninstall_ds_traefik() {
  info "dockserv_uninstall_ds_traefik()"
  STACKNAME=ds_traefik
  STACKDIR=~/.${STACKNAME}
  HOSTNAMES=$(hostname)

  dockserv_remove "$STACKDIR"

}


dockserv_uninstall_ds_mariadb() {
  info "dockserv_uninstall_ds_traefik()"
  STACKNAME=ds_mariadb
  STACKDIR=~/.${STACKNAME}
  HOSTNAMES=$(hostname)

  dockserv_remove "$STACKDIR"

}

dockserv_install_ds_mariadb() {
  info "dockserv_install_ds_mariadb()"
  STACKNAME=ds_mariadb
  STACKDIR=~/.${STACKNAME}
  HOSTNAMES=$(hostname)

  dockserv_create "$STACKNAME" "$HOSTNAMES"

}
dockserv_install_ds_traefik() {
  info "dockserv_install_ds_traefik()"
  STACKNAME=ds_traefik
  STACKDIR=~/.${STACKNAME}
  HOSTNAMES=$(hostname)

  DOCKSERVE_LE_EMAIL=$1

  dockserv_create "$STACKNAME" "$HOSTNAMES"
}

dockserv_install() {
  info "inc/fn_dockserv - dockserv_ install"

  if [ ! -f ~/.ssh/id_rsa ];then
    notice "For the backupfunctionality to work, a SSH connection is required."
    warn "No key found in ~/.ssh/id_rsa"
    ssh-keygen
  fi


  if [ ! -f ~/.ssh/.dockserv]; then
    notice "For the backupfunctionality to work, a SSH connection is required."

    error "Please enter the SCP user :"
    read SCP_USER
    if [ "$SCP_USER" = "" ];then
      fatal "Missing SCP_USER!"
    fi

    error "Please enter the remote SCP host/ip :"
    read SCP_HOST
    if [ "$SCP_HOST" = "" ];then
      fatal "Missing SCP ip!"
    fi

    error "Please enter the remote SCP port :"
    read SCP_PORT
    if [ "$SCP_PORT" = "" ];then
      SCP_PORT=22
    fi


    error "Please enter the remote path:"
    read SCP_PORT
    if [ "$SCP_PORT" = "" ];then
      SCP_DIRECTORY="/home/${SCP_USER}"
    fi


    echo "SCP_USER=$SCP_USER"> ~/.ssh/.dockserv
    echo "SCP_HOST=$SCP_HOST">> ~/.ssh/.dockserv
    echo "SCP_PORT=$SCP_PORT">> ~/.ssh/.dockserv
    echo "SCP_DIRECTORY=/backupstorage/backup-storage/$(hostname)/">> ~/.ssh/.dockserv

    #SCP_HOST=141.224.243.79
    #SCP_PORT=2222
    #SCP_DIRECTORY=/backupstorage/backup-storage/$(hostname)/


  fi





  dockserv_install_ds_traefik "$1"
  dockserv_install_ds_mariadb "$1"




}

dockserv_uninstall() {
  info "inc/dn_dockserv - dockserv_uninstall"
  echo "INFO: Uninstalling dockserv "

  dockserv_uninstall_ds_traefik
  dockserv_uninstall_ds_mariadb
}
